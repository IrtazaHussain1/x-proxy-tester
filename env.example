# Database Configuration
# For local MySQL: mysql://USERNAME:PASSWORD@localhost:3306/DATABASE_NAME
# Example: mysql://root:yourpassword@localhost:3306/xproxy_tester
DATABASE_URL="mysql://root:root@localhost:3306/xproxy_tester"

# XProxy Portal API Configuration
XPROXY_API_URL="https://jmui.vercel.app"
XPROXY_API_ENDPOINT="/api/phones"
XPROXY_API_TOKEN="your-api-token-here"
XPROXY_API_TIMEOUT_MS=30000

# Testing Configuration
TEST_TARGET_URL="https://api.ipify.org?format=json"
TEST_INTERVAL_MS=5000
REQUEST_TIMEOUT_MS=30000
ROTATION_THRESHOLD=10

# Refresh Configuration
PROXY_REFRESH_INTERVAL_MS=21600000

# Stability Calculation
STABILITY_CHECK_INTERVAL_MS=600000

# Auto-Deactivation Configuration
# Automatically deactivate proxies that start failing consistently
AUTO_DEACTIVATION_ENABLED=true
# Number of consecutive failures before auto-deactivation
AUTO_DEACTIVATION_CONSECUTIVE_FAILURES=20
# Failure rate threshold (0.0 to 1.0, e.g., 0.9 = 90% failure rate)
AUTO_DEACTIVATION_FAILURE_RATE=0.9
# Number of recent requests to check for failure rate
AUTO_DEACTIVATION_FAILURE_RATE_WINDOW=50

# Auto-Recovery Configuration
# Automatically reactivate proxies that recover after being deactivated
AUTO_RECOVERY_ENABLED=true
# How often to check deactivated proxies for recovery (in milliseconds)
AUTO_RECOVERY_CHECK_INTERVAL_MS=300000
# Number of consecutive successful requests required to reactivate
AUTO_RECOVERY_CONSECUTIVE_SUCCESSES=5

# IP Rotation Configuration
# Automatically rotate IP for inactive proxies to make them active
IP_ROTATION_ENABLED=true
# How often to check for inactive proxies and trigger IP rotation (in milliseconds)
IP_ROTATION_CHECK_INTERVAL_MS=60000
# Wait time after sending rotation command before checking status (in milliseconds)
IP_ROTATION_WAIT_AFTER_ROTATION_MS=5000
# Cooldown period between rotation attempts for the same proxy (in milliseconds)
IP_ROTATION_COOLDOWN_MS=300000
# Whether to prefer unique IP rotation over standard rotation (true/false)
IP_ROTATION_PREFER_UNIQUE=false

# Runtime Configuration
MIN_RUN_HOURS=72
RUN_MODE="infinite"
MONITOR_CHECK_INTERVAL_MS=3600000

# Logging
LOG_LEVEL="info"

# Encryption (for proxy passwords)
# Generate a secure key: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY="your-encryption-key-here-64-hex-characters"
ENCRYPTION_SALT="optional-salt-for-key-derivation"

# Health Check Server
HEALTH_CHECK_PORT=3000

# Data Archival
ENABLE_ARCHIVAL=true
DATA_RETENTION_DAYS=30
ARCHIVAL_INTERVAL_MS=86400000
ARCHIVAL_BATCH_SIZE=1000

# Alert Monitoring
ENABLE_ALERT_MONITORING=true
ALERT_CHECK_INTERVAL_MS=60000
ALERT_WEBHOOK_URL=""
SLACK_WEBHOOK_URL=""

# Grafana Configuration
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# Database Export (optional)
# EXPORT_FORMAT="sql"
# EXPORT_OUTPUT_DIR="./exports"
# EXPORT_TABLES="proxies,proxy_requests"

